# splunkgen
[![Maintenance](https://img.shields.io/badge/Maintained%3F-no-red.svg)](https://bitbucket.org/lbesson/ansi-colors)

[![forthebadge made-with-python](http://ForTheBadge.com/images/badges/made-with-python.svg)](https://www.python.org/)

:netherlands:  :atom:  :octocat:

## Files
- .gitignore      Don't put EVERYTING in the repository.
- firstnames.txt  Long list of firstnames.
- README.md       You're reading it.    
- splunkgen.py    Datagenerator written for python3, no further prereqs.
- surnames.txt    Long list of surnames.        
- text.txt        File containing the text from which snippets are quoted, you
can use any 'flat' text here, as long as the filename is right.
- sm9_test.log    Not included in this repo, but will be generated by the
script. Splunk ingestion you can configure yourself.

## Description
Script generates the data needed to test an alternative for the sm9-secure
scripts. It can be tweaked for own purposes, or used as a basis to develop own
data generators.

The text.txt file can be replaced by any flat text (no special formatting), but
keep the name the same.

The firstnames.txt and surnames.txt are used to generate relatively unique
names. Again, feel free to use your own, but use the same filenames.

The script leans heavily on the python built-in random module. The random seed
is taken from the system time. If you want reproducable results, please use a
constant seed primer. Consult the python library reference om the use of the
random module. https://docs.python.org/3/library/random.html

If you seek true randomness, consult random.org. They can provide an API which
can deliver true random numbers, based on cosmic noise. Use it only to prime
your random seed, because requests are 'throtled' and using random.org for
each random number will result in an unbearable pace....

## My usage
I had to test certain Splunk search SPL commands to clean up kv-stores under
certain conditions (dependent on file contents). Since it could take ages
before a situation I wanted to test occurred, I wanted a seperate testing
environment, with a dataflow to Splunk that I could tweak. This dataflow
is generated by this script.

I only needed to define a splunk data input to ingest the file that was being
generated by this script (sm9_test.log).

The script will stop when it reaches the number of records it should generate
according to the values in the code. You can also interrupt with Ctl-C.

### Example record format incidents
2021-03-12 16:00:22.000, NUMBER="IM007448986", OPEN_TIME="2021-03-12 15:59:47", OPENED_BY="0001.HarryNak", OPEN_GROUP="INF Belgium StBiggeklooster DEALING ROOM SUPPORT", PRIORITY_CODE="5", SEVERITY="4", ASSIGNMENT="INF Belgium StBiggeklooster DEALING ROOM SUPPORT", STATUS="Closed", CLOSE_TIME="2021-03-12 16:00:22", CLOSED_BY="0001.Harry Nak", CLOSURE_CODE="Closed without customer, financial, or user impact", BRIEF_DESCRIPTION="Bep and Toos - Install Phantom PDF", ACTION="Bep and Toos - Install Phantom PDF", LOGICAL_NAME="N/A SC", SYSMODTIME="2021-03-12 16:00:22", CAUSED_BY="N/A SC", RESTRICTED="N", ASSIGNEE="0001.OmeJoop", SLA_BREACH="f", CATEGORY="incident", SUBCATEGORY="n/a", AFFECTED_CI="N/A SC"

### Test record format
YYYY-MM-DD hh:mm:ss, NUMBER="<int>", OWNER="<firstname> <lastname>", SEVERITY="1-5", STATUS="<RAW|RARE|MEDIUM|WELL-DONE|CHARCOAL>", STORY="<text>", SYSMODTIME="YYYY-MM-DD hh:mm:ss", RESTRICTED="<Y/N>"

## Todo
- [x] Get firstnames file
- [x] Get surnames file
- [x] Get text file to quote randomly
- [x] Create record description
- [x] Create data generation script
- [x] Fetch data, layout, scripts from work
- [x] Move shit to AWS
- [x] Create Splunk input
- [x] Create SPL to select non restricted (and eventually clean KVS)
